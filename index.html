<!DOCTYPE html>
<html lang="en">
  <head>
    <!-- Main head section for meta tags, styles, and SEO -->
    <meta charset="UTF-8" />
    <title>Stopwatch & Reaction Time Tracker</title>
    <meta
      name="description"
      content="A modern stopwatch and reaction time tracker web app. Track laps and test your reaction speed with a dynamic, user-friendly interface inspired by Formula One track start lights."
    />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <style>
      /* Sidebar and layout styles */
      body {
        font-family: "Segoe UI", Arial, sans-serif;
        background: linear-gradient(135deg, #232526 0%, #414345 100%);
        min-height: 100vh;
        margin: 0;
        display: flex;
        flex-direction: row;
        align-items: stretch;
        justify-content: flex-start;
      }
      .sidebar {
        width: 70px;
        background: #d32f2f;
        display: flex;
        flex-direction: column;
        align-items: center;
        padding: 1.5em 0;
        border-top-right-radius: 20px;
        border-bottom-right-radius: 20px;
        box-shadow: 2px 0 16px rgba(211, 47, 47, 0.12);
        transition: width 0.3s;
        position: relative;
        z-index: 2;
      }
      .sidebar.expanded {
        width: 180px;
      }
      .sidebar-toggle {
        background: none;
        border: none;
        color: #fff;
        font-size: 1.7em;
        cursor: pointer;
        margin-bottom: 2em;
        transition: transform 0.2s;
      }
      .sidebar-toggle:active {
        transform: scale(0.9);
      }
      .tab-btn {
        background: none;
        border: none;
        color: #fff;
        font-size: 1.1em;
        padding: 1em 0.5em;
        width: 100%;
        text-align: left;
        cursor: pointer;
        border-radius: 8px;
        margin-bottom: 0.5em;
        transition: background 0.2s, color 0.2s;
        display: flex;
        align-items: center;
        gap: 0.7em;
        opacity: 0.85;
      }
      .tab-btn.active,
      .tab-btn:hover {
        background: #fff;
        color: #d32f2f;
        opacity: 1;
      }
      .tab-icon {
        font-size: 1.3em;
        min-width: 28px;
        text-align: center;
      }
      .main-content {
        flex: 1;
        display: flex;
        align-items: center;
        justify-content: center;
        position: relative;
        min-height: 100vh;
      }
      .tab-panel {
        display: none;
        width: 100%;
        max-width: 500px;
        margin: auto;
      }
      .tab-panel.active {
        display: block;
        animation: fadeIn 0.7s;
      }
      .stopwatch {
        background: rgba(255, 255, 255, 0.85);
        padding: 2.5em 3em;
        border-radius: 20px;
        box-shadow: 0 8px 32px rgba(44, 62, 80, 0.18);
        text-align: center;
        backdrop-filter: blur(6px);
        animation: fadeIn 1s ease;
      }
      @keyframes fadeIn {
        from {
          opacity: 0;
          transform: scale(0.95);
        }
        to {
          opacity: 1;
          transform: scale(1);
        }
      }
      .time {
        font-size: 3em;
        margin-bottom: 1.2em;
        letter-spacing: 3px;
        font-weight: 600;
        color: #d32f2f;
        text-shadow: 0 2px 8px rgba(211, 47, 47, 0.08);
        transition: color 0.3s;
        animation: pulse 1.2s infinite alternate;
      }
      @keyframes pulse {
        from {
          text-shadow: 0 2px 8px rgba(211, 47, 47, 0.08);
        }
        to {
          text-shadow: 0 4px 16px rgba(211, 47, 47, 0.18);
        }
      }
      .btn-group {
        display: flex;
        justify-content: center;
        gap: 1em;
      }
      button {
        font-size: 1.1em;
        padding: 0.7em 2em;
        border: none;
        border-radius: 8px;
        background: linear-gradient(90deg, #d32f2f 60%, #ff9800 100%);
        color: #fff;
        cursor: pointer;
        box-shadow: 0 2px 8px rgba(211, 47, 47, 0.12);
        transition: background 0.2s, transform 0.15s;
        font-weight: 500;
        outline: none;
        position: relative;
        overflow: hidden;
      }
      button:hover {
        background: linear-gradient(90deg, #b71c1c 60%, #d32f2f 100%);
        transform: scale(1.07);
      }
      button:active {
        transform: scale(0.97);
      }
      .laps {
        margin-top: 2em;
        background: rgba(255, 255, 255, 0.7);
        border-radius: 12px;
        box-shadow: 0 2px 8px rgba(211, 47, 47, 0.08);
        padding: 1em 2em;
        max-width: 320px;
        width: 100%;
        animation: fadeIn 0.7s;
      }
      .laps h3 {
        margin: 0 0 0.5em 0;
        font-size: 1.1em;
        color: #d32f2f;
        font-weight: 600;
      }
      .lap-list {
        list-style: none;
        padding: 0;
        margin: 0;
      }
      .lap-list li {
        font-size: 1em;
        padding: 0.4em 0;
        border-bottom: 1px solid #e3e3e3;
        color: #333;
        display: flex;
        justify-content: space-between;
      }
      .lap-list li:last-child {
        border-bottom: none;
      }
      .lap-label {
        font-weight: 500;
        color: #d32f2f;
      }
      .lap-time {
        font-family: "Consolas", monospace;
      }
      /* Formula One Start Lights */
      .f1-lights {
        display: flex;
        justify-content: center;
        gap: 1em;
        margin-bottom: 2em;
        margin-top: 1em;
      }
      .f1-light {
        width: 32px;
        height: 32px;
        border-radius: 50%;
        background: #222;
        box-shadow: 0 0 8px #111;
        border: 2px solid #444;
        transition: background 0.3s, box-shadow 0.3s;
      }
      .f1-light.on {
        background: #d32f2f;
        box-shadow: 0 0 24px 8px #d32f2f;
        border-color: #d32f2f;
      }
      .f1-light.go {
        background: #43a047;
        box-shadow: 0 0 24px 8px #43a047;
        border-color: #43a047;
      }
      /* Reaction Time Tracker styles */
      .reaction-panel {
        background: rgba(255, 255, 255, 0.85);
        padding: 2.5em 3em;
        border-radius: 20px;
        box-shadow: 0 8px 32px rgba(44, 62, 80, 0.18);
        text-align: center;
        backdrop-filter: blur(6px);
        animation: fadeIn 1s ease;
      }
      .reaction-btn {
        font-size: 1.1em;
        padding: 0.7em 2em;
        margin-top: 1.2em;
        background: linear-gradient(90deg, #d32f2f 60%, #ff9800 100%);
        color: #fff;
        border: none;
        border-radius: 10px;
        cursor: pointer;
        box-shadow: 0 2px 8px rgba(211, 47, 47, 0.12);
        transition: background 0.2s, transform 0.15s;
        font-weight: 600;
        display: inline-block;
      }
      .reaction-btn:active {
        transform: scale(0.97);
      }
      /* Make the Click button much more visible and with new design */
      #reactionClick {
        font-size: 2em;
        padding: 1em 3em;
        background: #222;
        color: #39ff14;
        border: 3px dotted #39ff14;
        box-shadow: 0 0 32px 8px #39ff1480;
        border-radius: 16px;
        font-weight: bold;
        letter-spacing: 2px;
        text-transform: uppercase;
        z-index: 1;
        display: none;
        position: relative;
        margin: 0 auto;
        animation: clickPop 0.5s cubic-bezier(0.68, -0.55, 0.27, 1.55);
      }
      @keyframes clickPop {
        0% {
          opacity: 0;
          transform: scale(0.7);
          filter: blur(2px);
        }
        80% {
          opacity: 1;
          transform: scale(1.1);
          filter: blur(0);
        }
        100% {
          opacity: 1;
          transform: scale(1);
          filter: blur(0);
        }
      }
      .reaction-status {
        font-size: 1.2em;
        margin-top: 1.2em;
        color: #d32f2f;
        min-height: 2em;
        transition: color 0.3s;
      }
      .reaction-results {
        margin-top: 2em;
        background: rgba(255, 255, 255, 0.7);
        border-radius: 12px;
        box-shadow: 0 2px 8px rgba(211, 47, 47, 0.08);
        padding: 1em 2em;
        max-width: 320px;
        width: 100%;
        animation: fadeIn 0.7s;
      }
      .reaction-results h3 {
        margin: 0 0 0.5em 0;
        font-size: 1.1em;
        color: #d32f2f;
        font-weight: 600;
      }
      .reaction-list {
        list-style: none;
        padding: 0;
        margin: 0;
      }
      .reaction-list li {
        font-size: 1em;
        padding: 0.4em 0;
        border-bottom: 1px solid #e3e3e3;
        color: #333;
        display: flex;
        justify-content: space-between;
      }
      .reaction-list li:last-child {
        border-bottom: none;
      }
      .reaction-label {
        font-weight: 500;
        color: #d32f2f;
      }
      .reaction-time {
        font-family: "Consolas", monospace;
      }
      .reaction-avg {
        margin-top: 1em;
        font-size: 1.1em;
        color: #d32f2f;
        font-weight: 500;
      }
      .reaction-controls {
        display: flex;
        justify-content: center;
        gap: 1em;
        margin-top: 1.2em;
        min-height: 60px;
      }
      .reaction-btn.hide {
        display: none !important;
      }
      @media (max-width: 600px) {
        .main-content,
        .tab-panel {
          max-width: 100vw;
          padding: 0 0.5em;
        }
        .stopwatch,
        .reaction-panel {
          padding: 1em 0.5em;
        }
        #reactionClick {
          font-size: 1.3em;
          padding: 0.7em 1em;
        }
        .f1-lights {
          gap: 0.5em;
        }
        .f1-light {
          width: 22px;
          height: 22px;
        }
      }
    </style>
  </head>
  <body>
    <!-- Sidebar navigation for tab switching -->
    <nav class="sidebar" id="sidebar">
      <button
        class="sidebar-toggle"
        id="sidebarToggle"
        title="Expand/collapse sidebar"
      >
        &#9776;
      </button>
      <button class="tab-btn active" id="tabStopwatch">
        <span class="tab-icon">&#9201;</span>
        <span class="tab-label" style="display: none">Stopwatch</span>
      </button>
      <button class="tab-btn" id="tabReaction">
        <span class="tab-icon">&#128308;</span>
        <span class="tab-label" style="display: none"
          >Reaction Time Tracker</span
        >
      </button>
    </nav>
    <main class="main-content">
      <!-- Stopwatch Tab -->
      <section class="tab-panel active" id="panelStopwatch">
        <div class="stopwatch">
          <h1>Stopwatch</h1>
          <div class="time" id="display">00:00:00.00</div>
          <div class="btn-group">
            <button id="start">Start</button>
            <button id="stop">Stop</button>
            <button id="lap">Lap</button>
            <button id="reset">Reset</button>
          </div>
          <div class="laps" id="laps" style="display: none">
            <h3>Laps</h3>
            <ul class="lap-list" id="lapList"></ul>
          </div>
        </div>
        <!-- Sound effects for stopwatch actions -->
        <audio
          id="startSound"
          src="https://cdn.pixabay.com/audio/2022/07/26/audio_124b7b2b7b.mp3"
        ></audio>
        <audio
          id="stopSound"
          src="https://cdn.pixabay.com/audio/2022/07/26/audio_124b7b2b7b.mp3"
        ></audio>
        <audio
          id="resetSound"
          src="https://cdn.pixabay.com/audio/2022/07/26/audio_124b7b2b7b.mp3"
        ></audio>
        <audio
          id="lapSound"
          src="https://cdn.pixabay.com/audio/2022/07/26/audio_124b7b2b7b.mp3"
        ></audio>
      </section>
      <!-- Reaction Time Tracker Tab -->
      <section class="tab-panel" id="panelReaction">
        <div class="reaction-panel">
          <h1>Reaction Time Tracker</h1>
          <!-- F1 Start Lights for reaction test -->
          <div class="f1-lights" id="f1Lights">
            <div class="f1-light" id="light1"></div>
            <div class="f1-light" id="light2"></div>
            <div class="f1-light" id="light3"></div>
            <div class="f1-light" id="light4"></div>
            <div class="f1-light" id="light5"></div>
          </div>
          <div class="reaction-status" id="reactionStatus" aria-live="polite">
            Test your reaction speed! Click "Start Test" to begin.
          </div>
          <div class="reaction-controls">
            <button class="reaction-btn" id="reactionStart">Start Test</button>
            <button
              class="reaction-btn"
              id="reactionClick"
              style="display: none"
            >
              Click!
            </button>
            <button
              class="reaction-btn"
              id="reactionReset"
              style="display: none"
            >
              Reset Results
            </button>
          </div>
          <div
            class="reaction-results"
            id="reactionResults"
            style="display: none"
          >
            <h3>Results</h3>
            <ul class="reaction-list" id="reactionList"></ul>
            <div class="reaction-avg" id="reactionAvg"></div>
          </div>
        </div>
      </section>
    </main>
    <script>
      // Sidebar animation and tab switching
      const sidebar = document.getElementById("sidebar");
      const sidebarToggle = document.getElementById("sidebarToggle");
      const tabBtns = document.querySelectorAll(".tab-btn");
      const tabLabels = document.querySelectorAll(".tab-label");
      const panels = document.querySelectorAll(".tab-panel");

      sidebarToggle.onclick = function () {
        sidebar.classList.toggle("expanded");
        tabLabels.forEach((label) => {
          label.style.display = sidebar.classList.contains("expanded")
            ? "inline"
            : "none";
        });
      };
      tabBtns.forEach((btn, idx) => {
        btn.onclick = function () {
          tabBtns.forEach((b) => b.classList.remove("active"));
          btn.classList.add("active");
          panels.forEach((panel, i) => {
            panel.classList.toggle("active", i === idx);
          });
        };
      });

      // Stopwatch logic
      let startTime = 0,
        elapsed = 0,
        timerInterval;
      const display = document.getElementById("display");
      const startBtn = document.getElementById("start");
      const stopBtn = document.getElementById("stop");
      const resetBtn = document.getElementById("reset");
      const lapBtn = document.getElementById("lap");
      const startSound = document.getElementById("startSound");
      const stopSound = document.getElementById("stopSound");
      const resetSound = document.getElementById("resetSound");
      const lapSound = document.getElementById("lapSound");
      const lapsDiv = document.getElementById("laps");
      const lapList = document.getElementById("lapList");
      let laps = [];

      function formatTime(ms) {
        const centiseconds = Math.floor((ms % 1000) / 10);
        const seconds = Math.floor((ms / 1000) % 60);
        const minutes = Math.floor((ms / (1000 * 60)) % 60);
        const hours = Math.floor(ms / (1000 * 60 * 60));
        return (
          (hours < 10 ? "0" : "") +
          hours +
          ":" +
          (minutes < 10 ? "0" : "") +
          minutes +
          ":" +
          (seconds < 10 ? "0" : "") +
          seconds +
          "." +
          (centiseconds < 10 ? "0" : "") +
          centiseconds
        );
      }
      function updateDisplay() {
        display.textContent = formatTime(elapsed);
      }
      function updateLaps() {
        lapList.innerHTML = "";
        if (laps.length === 0) {
          lapsDiv.style.display = "none";
          return;
        }
        lapsDiv.style.display = "block";
        laps.forEach((lap, i) => {
          const li = document.createElement("li");
          li.innerHTML = `<span class="lap-label">Lap ${i + 1}</span>
                                                                <span class="lap-time">${formatTime(
                                                                  lap
                                                                )}</span>`;
          lapList.appendChild(li);
        });
      }
      startBtn.onclick = function () {
        if (!timerInterval) {
          startTime = Date.now() - elapsed;
          timerInterval = setInterval(function () {
            elapsed = Date.now() - startTime;
            updateDisplay();
          }, 10);
          startSound.currentTime = 0;
          startSound.play();
          display.style.color = "#43a047";
          setTimeout(() => (display.style.color = "#d32f2f"), 400);
        }
      };
      stopBtn.onclick = function () {
        clearInterval(timerInterval);
        timerInterval = null;
        stopSound.currentTime = 0;
        stopSound.play();
        display.style.color = "#dc3545";
        setTimeout(() => (display.style.color = "#d32f2f"), 400);
      };
      resetBtn.onclick = function () {
        clearInterval(timerInterval);
        timerInterval = null;
        elapsed = 0;
        laps = [];
        updateDisplay();
        updateLaps();
        resetSound.currentTime = 0;
        resetSound.play();
        display.style.color = "#ff9800";
        setTimeout(() => (display.style.color = "#d32f2f"), 400);
      };
      lapBtn.onclick = function () {
        if (timerInterval) {
          laps.push(elapsed);
          updateLaps();
          lapSound.currentTime = 0;
          lapSound.play();
          display.style.color = "#1976d2";
          setTimeout(() => (display.style.color = "#d32f2f"), 400);
        }
      };
      updateDisplay();
      updateLaps();

      // Reaction Time Tracker logic
      const reactionStatus = document.getElementById("reactionStatus");
      const reactionStart = document.getElementById("reactionStart");
      const reactionClick = document.getElementById("reactionClick");
      const reactionReset = document.getElementById("reactionReset");
      const reactionResults = document.getElementById("reactionResults");
      const reactionList = document.getElementById("reactionList");
      const reactionAvg = document.getElementById("reactionAvg");
      // F1 lights
      const f1Lights = [
        document.getElementById("light1"),
        document.getElementById("light2"),
        document.getElementById("light3"),
        document.getElementById("light4"),
        document.getElementById("light5"),
      ];
      let reactionStartTime = 0;
      let reactionTimeout;
      let reactionTimes = [];
      let waiting = false;
      let testActive = false;

      function formatReaction(ms) {
        return ms + " ms";
      }
      function average(arr) {
        if (!arr.length) return 0;
        return Math.round(arr.reduce((a, b) => a + b, 0) / arr.length);
      }
      function updateReactionResults() {
        reactionList.innerHTML = "";
        if (reactionTimes.length === 0) {
          reactionResults.style.display = "none";
          reactionAvg.textContent = "";
          reactionReset.style.display = "none";
          return;
        }
        reactionResults.style.display = "block";
        reactionTimes.forEach((rt, i) => {
          const li = document.createElement("li");
          li.innerHTML = `<span class="reaction-label">Test ${i + 1}</span>
                                                    <span class="reaction-time">${formatReaction(
                                                      rt
                                                    )}</span>`;
          reactionList.appendChild(li);
        });
        reactionAvg.textContent = `Average: ${average(reactionTimes)} ms`;
        reactionReset.style.display = "inline-block";
      }
      function resetF1Lights() {
        f1Lights.forEach((light) => {
          light.classList.remove("on", "go");
        });
      }
      function startF1Sequence(callback) {
        resetF1Lights();
        let idx = 0;
        function nextLight() {
          if (idx < f1Lights.length) {
            f1Lights[idx].classList.add("on");
            idx++;
            setTimeout(nextLight, 400);
          } else {
            // Wait random time, then GO!
            setTimeout(() => {
              f1Lights.forEach((light) => light.classList.remove("on"));
              f1Lights.forEach((light) => light.classList.add("go"));
              callback();
            }, 1000 + Math.random() * 1500);
          }
        }
        nextLight();
      }
      function startReactionTest() {
        reactionStart.disabled = true;
        reactionStart.classList.add("hide");
        reactionReset.classList.add("hide");
        reactionClick.style.display = "none";
        reactionClick.classList.remove("hide");
        reactionClick.style.background = "#222";
        reactionClick.style.borderColor = "#39ff14";
        reactionClick.style.boxShadow = "0 0 32px 8px #39ff1480";
        reactionClick.style.color = "#39ff14";
        reactionClick.textContent = "Click!";
        reactionStatus.textContent = "Get ready for the lights...";
        reactionStatus.style.color = "#d32f2f";
        waiting = true;
        testActive = true;
        resetF1Lights();
        startF1Sequence(() => {
          reactionStatus.textContent = "GO! Click NOW!";
          reactionStatus.style.color = "#43a047";
          reactionClick.style.display = "inline-block";
          reactionClick.classList.remove("hide");
          reactionClick.textContent = "CLICK!";
          // Remove animation for instant appearance
          reactionClick.style.animation = "none";
          reactionStartTime = Date.now();
          waiting = false;
        });
      }
      reactionStart.onclick = startReactionTest;
      reactionClick.onclick = function () {
        if (!waiting && reactionStartTime && testActive) {
          const rt = Date.now() - reactionStartTime;
          reactionTimes.push(rt);
          updateReactionResults();
          reactionStatus.textContent = `Your reaction time: ${rt} ms`;
          reactionStatus.style.color = "#d32f2f";
          reactionClick.style.display = "none";
          reactionStart.disabled = false;
          reactionStart.classList.remove("hide");
          reactionReset.classList.remove("hide");
          reactionStartTime = 0;
          testActive = false;
          resetF1Lights();
        }
      };
      // Prevent cheating by clicking early
      reactionClick.onmousedown = function (e) {
        if (waiting) {
          clearTimeout(reactionTimeout);
          reactionStatus.textContent = "Too soon! Try again.";
          reactionStatus.style.color = "#dc3545";
          reactionClick.style.display = "none";
          reactionStart.disabled = false;
          reactionStart.classList.remove("hide");
          reactionReset.classList.remove("hide");
          reactionStartTime = 0;
          testActive = false;
          resetF1Lights();
        }
      };
      reactionReset.onclick = function () {
        reactionTimes = [];
        updateReactionResults();
        reactionStatus.textContent =
          "Results cleared. Click 'Start Test' to try again.";
        reactionStatus.style.color = "#d32f2f";
        resetF1Lights();
      };
      updateReactionResults();
      resetF1Lights();
    </script>
  </body>
</html>
